<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1480212280036" ID="ID_930366294" MODIFIED="1480212428350" STYLE="bubble" TEXT="ceph">
<node CREATED="1480212288660" HGAP="52" ID="ID_506717697" MODIFIED="1508914791134" POSITION="right" STYLE="bubble" TEXT="&#x89d2;&#x8272;" VSHIFT="-40">
<node CREATED="1480212302624" HGAP="9" ID="ID_299205990" MODIFIED="1539049223526" STYLE="bubble" TEXT="OSDs" VSHIFT="-49">
<node CREATED="1480212324723" HGAP="23" ID="ID_603919199" MODIFIED="1480212437696" STYLE="bubble" TEXT="&#x6570;&#x91cf;&#xff1a;&#x4e24;&#x4e2a;&#x53ca;&#x4ee5;&#x4e0a;" VSHIFT="-23"/>
<node CREATED="1508815595112" ID="ID_862458509" MODIFIED="1508815631649" TEXT="&#x901a;&#x5e38;&#x4e00;&#x4e2a;osd&#x5b88;&#x62a4;&#x8fdb;&#x7a0b;&#x4e0e;&#x4e00;&#x5757;&#x7269;&#x7406;&#x78c1;&#x76d8;&#x6346;&#x7ed1;"/>
<node CREATED="1480212359790" ID="ID_1436794843" MODIFIED="1480212434026" STYLE="bubble" TEXT="&#x5b58;&#x50a8;&#x6570;&#x636e;&#xff0c;&#x5904;&#x7406;&#x6570;&#x636e;&#x590d;&#x5236;&#xff0c;&#x6062;&#x590d;&#xff0c;&#x56de;&#x586b;&#xff0c;&#x91cd;&#x65b0;&#x8c03;&#x6574;&#xff0c;&#x5e76;&#x901a;&#x8fc7;&#x68c0;&#x67e5;&#x5176;&#x5b83;Ceph OSD&#x5b88;&#x62a4;&#x7a0b;&#x5e8f;&#x4f5c;&#x4e3a;&#x4e00;&#x4e2a;&#x5fc3;&#x8df3; &#x5411;Ceph&#x7684;&#x76d1;&#x89c6;&#x5668;&#x62a5;&#x544a;&#x4e00;&#x4e9b;&#x68c0;&#x6d4b;&#x4fe1;&#x606f;" VSHIFT="25"/>
<node CREATED="1539048868430" ID="ID_644187929" MODIFIED="1539048995100" TEXT="&#x6d88;&#x8017;CPU&#xff0c;&#x81f3;&#x5c11;&#x53cc;&#x6838;"/>
<node CREATED="1539049177147" ID="ID_1478337214" MODIFIED="1539138945714" TEXT="&#x5185;&#x5b58;&#x6bcf;&#x8fdb;&#x7a0b;500MB,&#x6062;&#x590d;&#x671f;&#x6bcf;&#x8fdb;&#x7a0b;1GB/TB,&#x8d8a;&#x591a;&#x8d8a;&#x597d;"/>
<node CREATED="1508815782711" ID="ID_548087264" MODIFIED="1508815790419" TEXT="RADOS">
<node CREATED="1508815821724" ID="ID_1027061532" MODIFIED="1508815841151" TEXT="&#x662f;Ceph&#x5b58;&#x50a8;&#x96c6;&#x7fa4;&#x7684;&#x57fa;&#x7840;"/>
<node CREATED="1508815864228" ID="ID_165058571" MODIFIED="1508827067088" TEXT="&#x6267;&#x884c;&#x6570;&#x636e;&#x4fdd;&#x5b58;&#x3001;&#x590d;&#x5236;&#x3001;&#x6545;&#x969c;&#x68c0;&#x6d4b;&#x548c;&#x6062;&#x590d;,&#x4ee5;&#x53ca;&#x6570;&#x636e;&#x8fc1;&#x79fb;&#x548c;&#x5728;&#x6240;&#x6709;&#x96c6;&#x7fa4;&#x8282;&#x70b9;&#x5b9e;&#x73b0;&#x518d;&#x5e73;&#x8861;"/>
</node>
<node CREATED="1508827069612" ID="ID_727148894" MODIFIED="1508827074888" TEXT="librados">
<node CREATED="1508833817882" ID="ID_903866353" MODIFIED="1508833862304" TEXT="&#x4e3a;&#x5404;&#x79cd;&#x8bed;&#x8a00;&#x63d0;&#x4f9b;&#x8bbf;&#x95ee;RADOS&#x63a5;&#x53e3;"/>
</node>
<node CREATED="1539240652284" ID="ID_247865548" MODIFIED="1539240660191" TEXT="&#x7ba1;&#x7406;&#x6570;&#x636e;&#x65b9;&#x5f0f;">
<node BACKGROUND_COLOR="#ffffff" COLOR="#cc0000" CREATED="1539240630463" ID="ID_689589194" MODIFIED="1539241013799" TEXT="BLUESTORE &#x65b0;&#x7684;">
<node CREATED="1539240622128" ID="ID_379676656" MODIFIED="1539240628928" TEXT="Luminous 12.2.z+"/>
<node CREATED="1539240641910" ID="ID_285475237" MODIFIED="1539240696624" TEXT="&#x76f4;&#x63a5;&#x7ba1;&#x7406;&#x5b58;&#x50a8;&#x8bbe;&#x5907;"/>
<node CREATED="1539240711654" ID="ID_1285105628" MODIFIED="1539240721098" TEXT="&#x4f7f;&#x7528;RocksDB&#x8fdb;&#x884c;&#x5143;&#x6570;&#x636e;&#x7ba1;&#x7406;"/>
<node CREATED="1539240726232" ID="ID_507246017" MODIFIED="1539240733192" TEXT="&#x5b8c;&#x6574;&#x6570;&#x636e;&#x548c;&#x5143;&#x6570;&#x636e;&#x6821;&#x9a8c;&#x548c;"/>
<node CREATED="1539240735356" ID="ID_1640228289" MODIFIED="1539240742295" TEXT="&#x5185;&#x8054;&#x538b;&#x7f29;"/>
<node COLOR="#cc0000" CREATED="1539240743950" ID="ID_1814338322" MODIFIED="1539240894593" TEXT="&#x591a;&#x8bbe;&#x5907;&#x5143;&#x6570;&#x636e;&#x5206;&#x5c42;">
<node CREATED="1539240749953" ID="ID_1093808259" MODIFIED="1539240863595" TEXT="&#x5c06;&#x5176;&#x5185;&#x90e8;&#x65e5;&#x5fd7;&#xff08;&#x9884;&#x5199;&#x65e5;&#x5fd7;&#xff09;&#x5199;&#x5165;&#x5355;&#x72ec;&#x7684;&#x9ad8;&#x901f;&#x8bbe;&#x5907;&#xff08;&#x5982;SSD&#xff0c;NVMe&#x6216;NVDIMM&#xff09;&#x4ee5;&#x63d0;&#x9ad8;&#x6027;&#x80fd;&#x3002;&#x65e5;&#x5fd7;&#x5927;&#x5c0f;/&#x786c;&#x76d8;&#x5927;&#x5c0f; &gt; 4%"/>
</node>
<node COLOR="#cc0000" CREATED="1539240783212" ID="ID_682304678" MODIFIED="1539240950429" TEXT="&#x9ad8;&#x6548;&#x7684;&#x5199;&#x65f6;&#x590d;&#x5236;"/>
</node>
<node CREATED="1539241015742" ID="ID_64780979" MODIFIED="1539241037470" TEXT="FILESTORE &#x65e7;&#x7684;">
<node CREATED="1539241024066" ID="ID_235402427" MODIFIED="1539241062202" TEXT="&#x5b83;&#x4f9d;&#x8d56;&#x4e8e;&#x6807;&#x51c6;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#xff08;&#x901a;&#x5e38;&#x4e3a;XFS&#xff09;&#x4e0e;&#x952e;/&#x503c;&#x6570;&#x636e;&#x5e93;&#xff08;&#x4f20;&#x7edf;&#x4e0a;&#x4e3a;LevelDB&#xff0c;&#x73b0;&#x4e3a;RocksDB&#xff09;&#x7684;&#x7ec4;&#x5408;"/>
</node>
</node>
</node>
<node CREATED="1486786654755" HGAP="16" ID="ID_1530062468" MODIFIED="1539139358912" TEXT="Monitor" VSHIFT="-29">
<node CREATED="1508815439442" ID="ID_1943190196" MODIFIED="1508815494019" TEXT="&#x4fdd;&#x5b58;&#x96c6;&#x7fa4;&#x72b6;&#x6001;&#x6620;&#x5c04;&#xff0c;&#x4e3a;&#x6bcf;&#x4e2a;&#x7ec4;&#x4ef6;&#x7ef4;&#x62a4;&#x6620;&#x5c04;&#x4fe1;&#x606f;"/>
<node CREATED="1508815495863" ID="ID_1074983588" MODIFIED="1508815499968" TEXT="osd map"/>
<node CREATED="1508815500431" ID="ID_628122363" MODIFIED="1508815511014" TEXT="MON map"/>
<node CREATED="1508815511407" ID="ID_49310343" MODIFIED="1508815515741" TEXT="PG map"/>
<node CREATED="1508815516097" ID="ID_1507788401" MODIFIED="1508815522326" TEXT="CRUSH map"/>
<node CREATED="1508815531436" ID="ID_1028137604" MODIFIED="1508815539011" TEXT="&#x4e0d;&#x5b58;&#x50a8;&#x6570;&#x636e;"/>
<node CREATED="1539048964298" ID="ID_137199068" MODIFIED="1539049210702" TEXT="&#x5c11;&#x91cf;CPU&#x8d44;&#x6e90; &#xff0c;&#x5185;&#x5b58;&#x81f3;&#x5c11;&#x6bcf;&#x8fdb;&#x7a0b;1GB"/>
</node>
<node CREATED="1539139490422" ID="ID_1363905452" MODIFIED="1539139500304" TEXT="Managers">
<node CREATED="1539139485265" ID="ID_1068610189" MODIFIED="1539139489549" TEXT="manage and expose Ceph cluster information, including a web-based Ceph Manager Dashboard and REST API."/>
</node>
<node CREATED="1486786661129" HGAP="24" ID="ID_443814522" MODIFIED="1508833890720" TEXT="MDS" VSHIFT="6">
<node CREATED="1486786665128" ID="ID_1291745252" MODIFIED="1509433104762" TEXT="&#x5143;&#x6570;&#x636e;&#x670d;&#x52a1;&#xff0c;&#x4f7f;&#x7528;Cephfs&#x65f6;&#x624d;&#x5b89;&#x88c5;"/>
<node CREATED="1539049268306" ID="ID_1223531980" MODIFIED="1539049286313" TEXT="&#x6d88;&#x8017;CPU&#xff0c;&#x81f3;&#x5c11;4&#x6838;"/>
<node CREATED="1539049325386" ID="ID_1475058307" MODIFIED="1539049341319" TEXT="&#x5185;&#x5b58;&#x81f3;&#x5c11;&#x6bcf;&#x8fdb;&#x7a0b;1GB "/>
<node CREATED="1508815729550" ID="ID_1796768912" MODIFIED="1508815766330" TEXT="&#x53ea;&#x4e3a;CephFS&#x7cfb;&#x7edf;&#x8ddf;&#x8e2a;&#x6587;&#x4ef6;&#x7684;&#x5c42;&#x6b21;&#x7ed3;&#x6784;&#x548c;&#x5b58;&#x50a8;&#x5143;&#x6570;&#x636e;"/>
</node>
<node CREATED="1508833865686" HGAP="29" ID="ID_445131656" MODIFIED="1539139370919" TEXT="RBD" VSHIFT="23">
<node CREATED="1508833893740" ID="ID_1033479942" MODIFIED="1508833939478" TEXT="&#x5757;&#x8bbe;&#x5907;&#xff0c;&#x63d0;&#x4f9b;&#x6c38;&#x4e45;&#x5757;&#x5b58;&#x50a8;"/>
<node CREATED="1508833939738" ID="ID_1825937438" MODIFIED="1508833951142" TEXT="&#x5c06;&#x6570;&#x636e;&#x5206;&#x6563;&#x5b58;&#x50a8;&#x5728;&#x591a;&#x4e2a;OSD&#x4e0a;"/>
</node>
<node CREATED="1508833967107" HGAP="24" ID="ID_76907001" MODIFIED="1539139368296" TEXT="RGW" VSHIFT="33">
<node CREATED="1508833973467" ID="ID_1286446609" MODIFIED="1508833994475" TEXT="&#x63d0;&#x4f9b;&#x5bf9;&#x8c61;&#x5b58;&#x50a8;&#x670d;&#x52a1;"/>
</node>
<node CREATED="1508833998181" ID="ID_38748104" MODIFIED="1539139364120" TEXT="CephFS" VSHIFT="38">
<node CREATED="1508834004956" ID="ID_516945450" MODIFIED="1539048404553" TEXT="Ceph&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#xff0c;&#x57fa;&#x4e8e;librados&#x5c01;&#x95ed;&#x4e86;&#x539f;&#x751f;&#x63a5;&#x53e3;"/>
</node>
</node>
<node CREATED="1539333159943" ID="ID_246058504" MODIFIED="1539333169661" POSITION="right" TEXT="&#x7b97;&#x6cd5;">
<node CREATED="1539333175243" ID="ID_1548369792" MODIFIED="1539333179818" TEXT="CRUSH">
<node CREATED="1539333180868" ID="ID_672725601" MODIFIED="1539333230099" TEXT="&#x8f93;&#x5165;X"/>
<node CREATED="1539333230494" ID="ID_245433601" MODIFIED="1539333235447" TEXT="cluster map">
<node CREATED="1539333364263" ID="ID_1787289475" MODIFIED="1539333384166" TEXT="&#x96c6;&#x7fa4;&#x5c42;&#x7ea7;&#x5316;&#x63cf;&#x8ff0;&#xff1a;&#x6811;&#x72b6;"/>
<node CREATED="1539333570216" ID="ID_1928496845" MODIFIED="1539333579232" TEXT="&#x8282;&#x70b9;&#x7c7b;&#x578b;">
<node CREATED="1539333580719" ID="ID_1726092931" MODIFIED="1539333591510" TEXT="0 #osd"/>
<node CREATED="1539333592004" ID="ID_707618926" MODIFIED="1539333597829" TEXT="1 #host"/>
<node CREATED="1539333598101" ID="ID_1260866322" MODIFIED="1539333881337" TEXT="2 #chassis &#x673a;&#x67b6;"/>
<node CREATED="1539333603949" ID="ID_822401797" MODIFIED="1539333877418" TEXT="3 #rack &#x673a;&#x67dc;"/>
<node CREATED="1539333609454" ID="ID_394591503" MODIFIED="1539333686493" TEXT="7 #room"/>
<node CREATED="1539333687556" ID="ID_1912169127" MODIFIED="1539333694828" TEXT="8 #datacenter"/>
<node CREATED="1539333698123" ID="ID_1054921601" MODIFIED="1539333891424" TEXT="9 # region &#x533a;&#x57df;"/>
<node CREATED="1539333704066" ID="ID_971385960" MODIFIED="1539333731984" TEXT="10 # root"/>
</node>
</node>
<node CREATED="1539333235974" ID="ID_1567891379" MODIFIED="1539334634292" TEXT="placement rule&#x6570;&#x636e;&#x5206;&#x90e8;&#x7b56;&#x7565;">
<node CREATED="1539334243662" ID="ID_450412566" MODIFIED="1539334248437" TEXT="take">
<node CREATED="1539334292484" ID="ID_130969527" MODIFIED="1539334320291" TEXT="&#x9009;bucket,&#x9ed8;&#x8ba4;root"/>
</node>
<node CREATED="1539334248701" ID="ID_919158976" MODIFIED="1539334251429" TEXT="select">
<node CREATED="1539334369409" ID="ID_1356940487" MODIFIED="1539334438210" TEXT="&#x4ece;&#x9009;&#x5b9a;&#x7684;bucket&#x4e2d;&#x968f;&#x673a;&#x6307;&#x5b9a;&#x7c7b;&#x578b;&#x548c;&#x6761;&#x76ee;"/>
<node CREATED="1539334439594" ID="ID_1156166538" MODIFIED="1539334484736" TEXT="&#x591a;&#x526f;&#x672c;&#x5bf9;&#x5e94;firstn&#x7b97;&#x6cd5;"/>
<node CREATED="1539334459939" ID="ID_775990396" MODIFIED="1539334481802" TEXT="&#x7ea0;&#x5220;&#x7801;&#x5bf9;&#x5e94;indep&#x7b97;&#x6cd5;"/>
</node>
<node CREATED="1539334251670" ID="ID_893567173" MODIFIED="1539334254004" TEXT="emit">
<node CREATED="1539334689745" ID="ID_892168884" MODIFIED="1539334704786" TEXT="&#x8f93;&#x51fa;&#x7ed3;&#x679c;&#x7ed9;&#x4e0a;&#x7ea7;&#x8c03;&#x7528;&#x5e76;&#x8fd4;&#x56de;"/>
</node>
</node>
<node CREATED="1539334566447" ID="ID_207232561" MODIFIED="1539335563627" TEXT="straw2\straw(&#x5e9f;&#x5f03;)"/>
</node>
</node>
<node CREATED="1508901460474" HGAP="159" ID="ID_1611678642" MODIFIED="1539334746094" POSITION="right" TEXT="&#x90e8;&#x7f72;" VSHIFT="-41">
<node CREATED="1539237938101" ID="ID_1006631555" MODIFIED="1539237947846" TEXT="&#x5de5;&#x5177;&#x90e8;&#x7f72;">
<node CREATED="1508901470258" ID="ID_392766634" MODIFIED="1508901991066" TEXT="deploy on node1">
<node CREATED="1508901503505" ID="ID_1720275798" MODIFIED="1508914757312" TEXT="&#x53ef;&#x4ee5;ssh root&#x65e0;&#x5bc6;&#x7801;&#x767b;&#x9646;&#x81f3;&#x5176;&#x5b83;node "/>
<node CREATED="1508901713603" ID="ID_768080698" MODIFIED="1508901720782" TEXT="yum install ceph-deploy">
<node CREATED="1508902669852" ID="ID_1188687999" MODIFIED="1508902674600" TEXT="&#x7b2c;&#x4e00;&#x53f0;&#x90e8;&#x7f72;">
<node CREATED="1508901745329" ID="ID_878722990" MODIFIED="1508901758434" TEXT="mkdir /etc/ceph"/>
<node CREATED="1508901723095" HGAP="15" ID="ID_584520661" MODIFIED="1508912438587" TEXT="cd /etc/ceph ;ceph-deploy new node1" VSHIFT="4"/>
<node CREATED="1508901829638" ID="ID_186405242" MODIFIED="1508901843842" TEXT="ceph-deploy install node1 node2 node3"/>
<node CREATED="1508901886366" ID="ID_727228841" MODIFIED="1508901897382" TEXT="ceph-deploy mon create-initial">
<node CREATED="1508902221077" ID="ID_848027600" MODIFIED="1508902300326" TEXT="&#x521b;&#x5efa;&#x7b2c;&#x4e00;&#x4e2a;monitor,&#x81f3;&#x5c11;&#x8981;3&#x4e2a;"/>
</node>
<node CREATED="1508901925109" HGAP="23" ID="ID_1186706733" MODIFIED="1508902096777" TEXT="ceph-deploy disk list node1" VSHIFT="2"/>
<node CREATED="1508902010313" ID="ID_27337119" MODIFIED="1508902049543" TEXT="ceph-deploy disk zap node1:sdb node1:sdc node1:sdd"/>
<node CREATED="1508902179912" HGAP="19" ID="ID_480548413" MODIFIED="1508902681640" TEXT="ceph-deploy osd create node1:sdb node1:sdc node1:sdd" VSHIFT="-15"/>
<node CREATED="1508912257121" ID="ID_1856175119" MODIFIED="1508912282113" TEXT="change ceph.conf public network"/>
</node>
<node CREATED="1508902658516" ID="ID_1282342927" MODIFIED="1508902664405" TEXT="&#x6269;&#x5c55;&#x5176;&#x5b83;&#x8282;&#x70b9;">
<node CREATED="1508912472671" ID="ID_1065594334" MODIFIED="1508912488616" TEXT="deploy node1&#x4e0a;&#x6267;&#x884c;">
<node CREATED="1508912292339" ID="ID_1892112403" MODIFIED="1508912315122" TEXT="ceph-deploy mon create node2"/>
<node CREATED="1508912318072" ID="ID_581895206" MODIFIED="1508912331123" TEXT="ceph-deploy mon create node3"/>
<node CREATED="1508912582497" ID="ID_835433532" MODIFIED="1508912586590" TEXT="ceph-deploy disk zap node2:sdb"/>
<node CREATED="1508912627299" ID="ID_259016118" MODIFIED="1508912649489" TEXT="ceph-deploy osd create node2:sdb"/>
<node CREATED="1508912582497" ID="ID_338100899" MODIFIED="1508912602867" TEXT="ceph-deploy disk zap node3:sdb"/>
<node CREATED="1508912627299" ID="ID_908912568" MODIFIED="1508912664229" TEXT="ceph-deploy osd create node3:sdb"/>
</node>
<node CREATED="1508912721905" ID="ID_400852172" MODIFIED="1508912762555" TEXT="&#x8c03;&#x6574;rbd&#x5b58;&#x50a8;&#x6c60;&#x7684;pg_num&#x548c;pgp_num">
<node CREATED="1508912764322" ID="ID_1349880902" MODIFIED="1508912778209" TEXT="ceph osd pool set rbd pg_num 256"/>
<node CREATED="1508912764322" ID="ID_1967897689" MODIFIED="1508912794355" TEXT="ceph osd pool set rbd pgp_num 256"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1539237958389" ID="ID_765369199" MODIFIED="1539237962439" TEXT="&#x624b;&#x52a8;&#x90e8;&#x7f72;">
<node CREATED="1539237986293" ID="ID_1045640915" MODIFIED="1539237992397" TEXT="RBD">
<node CREATED="1539238058705" ID="ID_1264523608" MODIFIED="1539238063128" TEXT="ceph"/>
<node CREATED="1539238005523" ID="ID_496772361" MODIFIED="1539239015609" TEXT="http://download.ceph.com/debian-mimic/pool/main/c/ceph/"/>
</node>
</node>
<node CREATED="1508914808272" ID="ID_1708330607" MODIFIED="1508914815434" TEXT="&#x5ba2;&#x6237;&#x7aef;&#x5b89;&#x88c5;">
<node CREATED="1508914816745" ID="ID_941256865" MODIFIED="1508914830513" TEXT="deploy on node1">
<node CREATED="1508914831410" ID="ID_1913949438" MODIFIED="1508914967758">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      cd /etc/ceph
    </p>
    <p>
      ceph-deploy --user-name root install client-node1 &#23433;&#35013;client
    </p>
    <p>
      ceph-deploy --username root config push client-node1 &#25512;&#36865;ceph.conf&#33267;client
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1508901573906" HGAP="19" ID="ID_859090956" MODIFIED="1508913545889" TEXT="&#x6240;&#x6709;node&#x7981;selinux,ntp&#x670d;&#x52a1;" VSHIFT="27"/>
</node>
<node CREATED="1508917255874" ID="ID_571184464" MODIFIED="1508917259943" POSITION="right" TEXT="&#x76d1;&#x63a7;">
<node CREATED="1508919478332" ID="ID_795579578" MODIFIED="1508919486228" TEXT="&#x76d1;&#x63a7;&#x547d;&#x4ee4;">
<node CREATED="1508919503556" ID="ID_876049803" MODIFIED="1508919509242" TEXT="ceph health"/>
<node CREATED="1508919509989" ID="ID_1408918688" MODIFIED="1508919522130" TEXT="ceph health detail"/>
<node CREATED="1508919565672" ID="ID_1961148877" MODIFIED="1508919567647" TEXT="ceph -w"/>
<node CREATED="1508919638019" ID="ID_1394871835" MODIFIED="1508919651089" TEXT="ceph df &#x4f7f;&#x7528;&#x7edf;&#x8ba1; &#x4fe1;&#x606f;"/>
<node CREATED="1508919684199" ID="ID_1711509996" MODIFIED="1508919849944" TEXT="ceph  status(-s)">
<node CREATED="1508919852246" ID="ID_1582893505" MODIFIED="1508919875971" TEXT="cluster:&#x96c6;&#x7fa4;&#x552f;&#x4e00;ID"/>
<node CREATED="1508919876887" ID="ID_1724874919" MODIFIED="1508919890689" TEXT="health:&#x96c6;&#x7fa4;&#x5065;&#x5eb7;&#x4fe1;&#x606f;"/>
<node CREATED="1508919890937" ID="ID_1340272698" MODIFIED="1508919922281" TEXT="monmap:mon map&#x7248;&#x672c;&#x53ca;&#x4ef2;&#x88c1;&#x72b6;&#x6001;"/>
<node CREATED="1508919948496" ID="ID_1903688086" MODIFIED="1508919989427" TEXT="mdsmap:MDS map&#x7684;&#x72b6;&#x6001;&#x53ca;&#x7248;&#x672c;&#x4fe1;&#x606f;"/>
<node CREATED="1508919990006" ID="ID_1263015523" MODIFIED="1508920043377" TEXT="osdmap:OSD map&#x7684;&#x7248;&#x672c;&#x4fe1;&#x606f;&#x53ca;&#x8fd0;&#x884c;&#x3001;&#x96c6;&#x7fa4;&#x4e2d;&#x7684;&#x72b6;&#x6001;"/>
<node CREATED="1508920051845" ID="ID_991841129" MODIFIED="1508920180905" TEXT="pgmap:PG map&#x7684;&#x7248;&#x672c;&#x3001;&#x603b;&#x6570;&#x3001;&#x5b58;&#x50a8;&#x6c60;&#x7684;&#x6570;&#x91cf;&#x3001;&#x4e00;&#x4efd;&#x6570;&#x636e;&#x526f;&#x672c;&#x6240;&#x5360;&#x7528;&#x7684;&#x7a7a;&#x95f4;&#x5927;&#x5c0f;&#x4ee5;&#x53ca;&#x5bf9;&#x8c61;&#x7684;&#x603b;&#x6570;&#x91cf;&#xa;&#x96c6;&#x7fa4;&#x4f7f;&#x7528;&#x4fe1;&#x606f;&#xff1a;&#x5df2;&#x7528;&#x5bb9;&#x91cf;&#x3001;&#x53ef;&#x7528;&#x5bb9;&#x91cf;&#x3001;&#x603b;&#x5bb9;&#x91cf; &#x53ca;PG&#x72b6;&#x6001;&#x4fe1;&#x606f;"/>
</node>
<node CREATED="1508920603201" ID="ID_1489994484" MODIFIED="1508920781486" TEXT="ceph osd">
<node CREATED="1508920771477" ID="ID_1031137315" MODIFIED="1508920774226" TEXT="tree">
<node CREATED="1508920647586" ID="ID_477591615" MODIFIED="1508920673848" TEXT="&#x4e86;&#x89e3;OSD&#x7684;IN&#x3001;OUT&#x3001;&#x548c;UP&#x3001;DOWN&#x7b49;&#x72b6;&#x6001;"/>
</node>
<node CREATED="1508920724891" ID="ID_809094581" MODIFIED="1508920729957" TEXT="dump"/>
<node CREATED="1508920730223" ID="ID_1393814084" MODIFIED="1508920736111" TEXT="blacklist ls">
<node CREATED="1508920737711" ID="ID_1666374138" MODIFIED="1508920753868" TEXT="&#x663e;&#x793a;&#x9ed1;&#x540d;&#x5355;&#x4e2d;&#x7684;&#x5ba2;&#x6237;&#x7aef;&#x5217;&#x8868;"/>
</node>
<node CREATED="1508920789258" ID="ID_197550646" MODIFIED="1508920794319" TEXT="crush dump"/>
<node CREATED="1508920798056" ID="ID_1241785567" MODIFIED="1508920804233" TEXT="crush rule list"/>
<node CREATED="1508920811928" ID="ID_1203266108" MODIFIED="1508920835252" TEXT="crush rule dump &lt;crush_rule_name&gt;"/>
<node CREATED="1508920856392" ID="ID_1070922522" MODIFIED="1508920878514" TEXT="find &lt;Numeric_OSD_ID&gt;">
<node CREATED="1508920884502" ID="ID_1467198759" MODIFIED="1508920908298" TEXT="&#x641c;&#x7d22;OSD&#x53ca;&#x5176;&#x5728;CRUSH map&#x4e2d;&#x7684;&#x4f4d;&#x7f6e;"/>
</node>
</node>
<node CREATED="1508921184621" ID="ID_748512917" MODIFIED="1508921452577" TEXT="ceph pg ">
<node CREATED="1508921400564" ID="ID_302044914" MODIFIED="1508921402274" TEXT="stat">
<node CREATED="1508921190428" ID="ID_964561519" MODIFIED="1508921378087">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      VNNNN:X pgs:Y active+clean;R MBdata,U MB used, F GB/T GB avail
    </p>
    <p>
      VNNNN: PG map &#29256;&#26412;&#21495;
    </p>
    <p>
      X: PG&#30340;&#24635;&#25968;&#37327;
    </p>
    <p>
      Y: &#22788;&#20110;active+clean&#29366;&#24577;&#30340;PG&#25968;&#37327;
    </p>
    <p>
      R: &#21407;&#22987;&#25968;&#25454;&#37327;
    </p>
    <p>
      U: &#20570;&#20102;&#21103;&#26412;&#20043;&#21518;&#23454;&#38469;&#21344;&#29992;&#30340;&#31354;&#38388;&#22823;&#23567;
    </p>
    <p>
      F&#65306;&#21097;&#20313;&#30340;&#21487;&#29992;&#23481;&#37327;
    </p>
    <p>
      T: &#24635;&#23481;&#37327;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1508921407056" ID="ID_1040964406" MODIFIED="1508921419924" TEXT="&lt;PG_ID&gt; query">
<node CREATED="1508921421007" ID="ID_326330134" MODIFIED="1508921432217" TEXT="&#x67e5;&#x8be2;&#x6307;&#x5b9a;PG&#x7684;&#x8be6;&#x7ec6;&#x4fe1;&#x606f;"/>
</node>
<node CREATED="1508921460939" ID="ID_146318793" MODIFIED="1508921478966" TEXT="dump_stuck &lt;unclean | inactive | stale&gt;">
<node CREATED="1508921480241" ID="ID_1565612999" MODIFIED="1508921492267" TEXT="&#x67e5;&#x8be2;&#x6307;&#x5b9a;&#x72b6;&#x6001;&#x7684;PG"/>
</node>
</node>
</node>
<node CREATED="1508919486710" ID="ID_1937032098" MODIFIED="1508919491255" TEXT="&#x76d1;&#x63a7;&#x5de5;&#x5177;">
<node CREATED="1508917261019" ID="ID_1997222078" MODIFIED="1508917266788" TEXT="calamari"/>
</node>
</node>
<node CREATED="1480212462048" HGAP="258" ID="ID_1082047900" MODIFIED="1539048788684" POSITION="left" STYLE="bubble" TEXT="&#x9ed8;&#x8ba4;&#x503c;" VSHIFT="-118">
<node CREATED="1480212474892" ID="ID_247211637" MODIFIED="1480212510143" STYLE="bubble" TEXT="2&#x4e2a;&#x5907;&#x4efd;,&#x53ef;&#x8c03;"/>
</node>
<node CREATED="1508914408189" HGAP="282" ID="ID_1211468765" MODIFIED="1509073255944" POSITION="left" TEXT="&#x7cfb;&#x7edf;" VSHIFT="-113">
<node CREATED="1508914415617" ID="ID_22890712" MODIFIED="1539050330657" TEXT="Ubuntu 16.04&#x6216;&#x5185;&#x6838;4.1.4+"/>
<node CREATED="1508914456673" ID="ID_487526981" MODIFIED="1539052156470" TEXT="Ceph LTS&#x7248;&#x672c;&#xff1a; V13.2.2 MIMIC"/>
<node CREATED="1539052098252" ID="ID_427253204" MODIFIED="1539052113661" TEXT="http://docs.ceph.com/docs/master/releases/#id1 &#x67e5;&#x770b;&#x7248;&#x672c;&#x4fe1;&#x606f;"/>
<node CREATED="1509436045059" ID="ID_1911274764" MODIFIED="1509436057216" TEXT="&#x786c;&#x76d8;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x63a8;&#x8350;XFS"/>
<node CREATED="1509434159693" ID="ID_453814190" MODIFIED="1509436042876" TEXT="&#x5e94;&#x8be5;&#x5206;&#x522b;&#x5728;&#x5355;&#x72ec;&#x7684;&#x786c;&#x76d8;&#x8fd0;&#x884c;&#x64cd;&#x4f5c;&#x7cfb;&#x7edf;&#x3001; OSD &#x6570;&#x636e;&#x548c; OSD &#x65e5;&#x5fd7;  "/>
<node CREATED="1509498477685" ID="ID_598018514" MODIFIED="1509498479240" TEXT="&#x5efa;&#x8bae;&#x6bcf;&#x53f0;&#x4e3b;&#x673a;&#x53ea;&#x8fd0;&#x884c;&#x4e00;&#x4e2a;&#x76d1;&#x89c6;&#x5668;&#x3001;&#x5e76;&#x4e14;&#x4e0d;&#x8981;&#x4e0e; OSD &#x4e3b;&#x673a;&#x590d;&#x7528;"/>
<node CREATED="1539050272003" ID="ID_1898773850" MODIFIED="1539050295136" TEXT="glibc&#x7248;&#x672c;&#x9700;&#x652f;&#x6301;syncfs(2)&#x7cfb;&#x7edf;&#x8c03;&#x7528;"/>
</node>
<node CREATED="1508901880416" ID="ID_1995756668" MODIFIED="1508913097847" POSITION="left" TEXT="&#x547d;&#x4ee4;">
<node CREATED="1508913677375" HGAP="150" ID="ID_1973580878" MODIFIED="1509073250752" TEXT="&#x57fa;&#x672c;&#x547d;&#x4ee4;" VSHIFT="-81">
<node CREATED="1508913101254" HGAP="86" ID="ID_586098764" MODIFIED="1509086947976" VSHIFT="5">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="2">ceph -s &#26597;&#30475;&#38598;&#32676;&#29366;&#24577; (</font><font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="2">ceph -s --conf /etc/ceph/ceph.conf --name client.admin --keyring /etc/ceph/ceph.client.admin.keyring</font><font size="2">) </font>
    </p>
    <p>
      <font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="2">ceph auth get client.admin --name mon. --keyring /var/lib/ceph/mon/ceph-blog/keyring</font><font size="2"> #</font><font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="2">exported keyring for client.admin</font>
    </p>
    <p>
      
    </p>
    <p>
      <font size="3">ceph -w&#160;&#20581;&#24247;&#29366;&#24577; </font>
    </p>
    <p>
      <font size="3">ceph quorum_status --format json-pretty&#160;&#160;&#20210;&#35009;&#29366;&#24577; </font>
    </p>
    <p>
      <font size="3">ceph mon dump &#23548;&#20986;monitor&#20449;&#24687; </font>
    </p>
    <p>
      <font size="3">ceph df &#26816;&#26597;&#38598;&#32676;&#20351;&#29992;&#29366;&#24577; </font>
    </p>
    <p>
      <font size="3">ceph mon|osd|pg stat &#26816;&#26597;monitor,osd pg&#29366;&#24577; </font>
    </p>
    <p>
      <font size="3">ceph pg dump </font>
    </p>
    <p>
      <font size="3">ceph osd lspools &#21015;&#34920;ceph&#23384;&#20648;&#27744; </font>
    </p>
    <p>
      <font size="3">ceph osd tree &#26816;&#26597;OSD&#30340;CRUSH map </font>
    </p>
    <p>
      <font size="3">ceph auth list &#21015;&#34920;&#32676;&#38598;&#30340;&#35748;&#35777;&#23494;&#38053;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1508913699664" HGAP="303" ID="ID_822560370" MODIFIED="1509073246376" TEXT="&#x9ad8;&#x7ea7;&#x547d;&#x4ee4;" VSHIFT="-106">
<node CREATED="1508915010807" ID="ID_1608515535" MODIFIED="1508915152035">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ceph auth get-or-create client.rbd mon 'allow r' osd 'allow class-read object_prefix rbd_children,allow rwx pool=rbd' &#21019;&#24314;ceph&#29992;&#25143;client.rbd &#23427;&#25317;&#26377;&#35775;&#38382;rbd&#23384;&#20648;&#27744;&#30340;&#26435;&#38480;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1508915171082" ID="ID_902861208" MODIFIED="1508915232515">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ceph auth get-or-create client-rbd | ssh root@client1 sudo tee /etc/ceph/ceph.client.rbd.keyring &#20026;client1&#19978;&#30340;client.rbd&#29992;&#25143;&#28155;&#21152;&#23494;&#38053;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1508915980647" ID="ID_1614125733" MODIFIED="1508916157698">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      rbd create rbd1 --size 10240 --name client.rbd &#21019;&#24314;&#19968;&#20010;10240MB&#22823;&#23567;&#30340;&#22359;&#35774;&#22791;rbd1
    </p>
    <p>
      rbd ls --name client.rbd
    </p>
    <p>
      rbd ls -p rbd --name client.rbd
    </p>
    <p>
      rbd list --name client.rbd
    </p>
    <p>
      #&#20197;&#19978;&#21015;&#20986;RBD&#38236;&#20687;
    </p>
    <p>
      rbd --image rbd1 info --name client.rbd &#26816;&#26597;rbd&#38236;&#20687;&#30340;&#32454;&#33410;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1508916547047" ID="ID_1672389712" MODIFIED="1508916553855" TEXT="&#x5757;&#x8bbe;&#x5907;&#x6620;&#x5c04;">
<node CREATED="1508916555119" ID="ID_266812802" MODIFIED="1508916645327">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      rbd map --image rbd1 --name client.rbd
    </p>
    <p>
      rbd showmappend --name client.rbd
    </p>
    <p>
      
    </p>
    <p>
      fdisk -l /dev/rbd1
    </p>
    <p>
      mkfs.xfs /dev/rbd1
    </p>
    <p>
      mount /dev/rbd1 /mnt/ceph-disk1
    </p>
    <p>
      df -h /mnt/ceph-disk1
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1508916661917" ID="ID_528794977" MODIFIED="1508916685339" TEXT="&#x5f00;&#x673a;&#x81ea;&#x52a0;&#x8f7d;">
<node CREATED="1508916688396" ID="ID_528264765" MODIFIED="1508916832051">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      wget init-rbdmap --&gt; /etc/init.d/
    </p>
    <p>
      echo &quot;rbd/rbd1 id=rbd,keyring=***==&quot; &gt;&gt; /etc/ceph/rbdmap
    </p>
    <p>
      echo &quot;/dev/rbd1 /mnt/ceph-disk1 xfs defaults, _netdev0 0 &quot; &gt;&gt; /etc/fstab
    </p>
    <p>
      mkdir /mnt/ceph-disk1
    </p>
    <p>
      /etc/init.d/rbdmap start<br />
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1508916409119" ID="ID_1742207651" MODIFIED="1508916421033" TEXT="&#x6269;&#x7f29;&#x5bb9;rbd">
<node CREATED="1508916422691" ID="ID_1595345730" MODIFIED="1508916526718">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      rbd resize --image rbd1 --size 20480 --name client.rbd
    </p>
    <p>
      rbd info --image rbd1 --name client.rbd
    </p>
    <p>
      xfs_growfs -d /mnt/ceph-disk1 #xfs&#25903;&#25345;&#22312;&#32447;&#35843;&#25972;&#22823;&#23567;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1509073266018" ID="ID_1290230344" MODIFIED="1509073268389" POSITION="left" TEXT="&#x7ba1;&#x7406;">
<node CREATED="1509073276998" ID="ID_1164367047" MODIFIED="1509073301154" TEXT="PG(&#x5f52;&#x7f6e;&#x7ec4;/&#x76ee;&#x5f55;)">
<node CREATED="1509073303251" ID="ID_881621642" MODIFIED="1509073352014" TEXT="&#x547d;&#x4ee4;">
<node CREATED="1509073356020" HGAP="42" ID="ID_1474326524" MODIFIED="1509074950977" VSHIFT="9">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4">ceph osd tree </font>
    </p>
    <p>
      <font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="4">rados -p rbd put char char.txt </font>
    </p>
    <p>
      <font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="4">ceph osd map rbd char</font><font size="4">&#160;&#26597;&#30475;&#25991;&#20214;&#20445;&#23384;&#23454;&#38469;&#20301;&#32622; </font>
    </p>
    <p>
      <font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="4">/var/lib/ceph/osd/ceph-0/current/</font><font size="4">&#160;pg&#30446;&#24405;&#20869;&#23481; </font>
    </p>
    <p>
      <font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="4">ceph pg dump_stuck</font><font size="4">&#160;&#65306;pg&#29366;&#24577;&#20449;&#24687; </font>
    </p>
    <p>
      <font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="4">ceph pg repair 0.44</font><font size="4">&#65306;&#25163;&#21160;&#24674;&#22797;&#20002;&#22833;&#30340;pg&#25991;&#20214;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1509073731439" ID="ID_1456176019" MODIFIED="1509073734168" TEXT="&#x72b6;&#x6001;">
<node CREATED="1509073735179" HGAP="15" ID="ID_1248411712" MODIFIED="1509074889633" VSHIFT="13">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="3">size = 3, min_size = 2</font><font size="3">&#160;:&#26377;3&#20010;&#21103;&#26412;&#65292;&#33267;&#23569;&#20004;&#20010;&#23384;&#27963;&#25165;&#33021;&#35835;&#21462; </font>
    </p>
    <p>
      <font size="3">active+clean &#65306; PG&#30340;&#20581;&#24247;&#29366;&#24577; </font>
    </p>
    <p>
      <font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="3">undersized:&#23384;&#27963;&#21103;&#26412;&#25968;&#23569;&#20110;3&#65292;&#20294;&#22823;&#20110;&#25110;&#31561;&#20110;min_size </font>
    </p>
    <p>
      <font color="rgb(77, 77, 76)" face="consolas, Menlo, PingFang SC, Microsoft YaHei, monospace" size="3">degraded:</font><font size="3">&#38477;&#32423; &#24403;&#19968;&#20010;pg&#25152;&#22312;OSD&#25346;&#25481;&#21518;&#30340;&#29366;&#24577; </font>
    </p>
    <p>
      
    </p>
    <p>
      <font size="3">perred:&#20005;&#37325;&#20107;&#20214;&#65292;&#21103;&#26412;&#25968;&#23567;&#20110;min_size&#20010;&#65292;&#19981;&#20877;&#21709;&#24212;&#22806;&#37096;IO&#35831;&#27714; </font>
    </p>
    <p>
      <font size="3">remapped:&#23558;&#25346;&#25481;(&#40664;&#35748;&#25346;5&#20998;&#38047;&#21518;)&#30340;OSD&#20869;&#23481;&#36716;&#31227;&#21040;&#20854;&#23427;OSD&#20013;&#30340;&#33258;&#24840;&#29366;&#24577;&#65292;&#27492;&#26102;pg&#22788;&#20110;&#22238;&#22635;&#29366;&#24577;backfilling </font>
    </p>
    <p>
      
    </p>
    <p>
      <font size="3">recover:&#36827;&#31243;&#25346;&#25481;&#30340;OSD&#36827;&#31243;&#25110;&#32593;&#32476;&#25238;&#21160;&#26410;&#26631;&#35760;&#20026;out &#21448;&#37325;&#26032;&#21152;&#20837;&#38598;&#32676;&#65292;&#20294;&#27492;&#26102;&#20854;&#23427;&#21103;&#26412;&#26377;&#26356;&#26032;&#65288;inconsistent&#29366;&#24577;&#65289;&#65292;&#21017;&#20250;&#37325;&#26032;&#21516;&#27493;&#26032;&#25968;&#25454;&#36807;&#26469;&#65292;&#27492;&#26102;pg&#34987;&#26631;&#35760;&#20026;recover </font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1539335855109" HGAP="25" ID="ID_278650278" MODIFIED="1539335964301" TEXT="OSD" VSHIFT="36">
<node CREATED="1539335912824" ID="ID_660273894" MODIFIED="1539336006726" TEXT="&#x6682;&#x65f6;&#x5931;&#x6548;&#x65f6; &#x8bbe;&#x7f6e;reweight=0,&#x56de;&#x5f52;(0x10000)&#x65f6;&#x53ea;&#x9700;&#x589e;&#x91cf;&#x540c;&#x6b65;"/>
<node CREATED="1539336047812" ID="ID_1496180718" MODIFIED="1539336103084" TEXT="&#x5220;&#x9664;OSD,&#x5219;&#x56de;&#x5f52;&#x540e;&#x4f1a;&#x505a;&#x4e3a;&#x65b0;&#x8bbe;&#x7f6e;&#x5904;&#x7406;"/>
</node>
</node>
</node>
</map>
